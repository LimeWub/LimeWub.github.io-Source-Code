// Component Variables
$timeline-line-width: 3px;
$timeline-circle-width: 30px;
$timeline-circle-space-top: 30px;
$timeline-item-padding: $small-space;
$timeline-item-description-padding: $xsmall-space;
$timeline-item-colors: (
    "default": #8d8791, //has to be first
    "brand1": $brand1-color,
    "brand2": $brand2-color,
    "brand3": $brand3-color,   
    "brand4": $brand4-color
);

// Rules
.timeline-item{
    padding: $timeline-item-padding;
    width: 100%;
    box-sizing: border-box;
    position: relative;
    @media (min-width: $small-desktop) {
        width: 50%;
    }
}

.timeline-item__period{ //hmmm
    
}
.timeline-item__title{
    margin-bottom: 0; 

}
.timeline-item__subtitle{ //hmmm
    font-size: 1rem;
    margin-bottom: 0;
    font-family: $regular-font;
}

.timeline-item__container{
    position: relative;
    margin-left: $timeline-circle-width;

    //Circle
    &:after{
        content: "";
        width: $timeline-circle-width;
        height: $timeline-circle-width;
        box-sizing: border-box;
        border-radius: 50%;
        border: $text-color 5px solid;
        background: white;
        position: absolute;
        left: -$timeline-circle-width*1.5 + $timeline-line-width/2;
        top:  $timeline-circle-space-top; 
    }

    //Line
    &:before{
        content: "";
        background: $text-color;
        height: calc(100% + #{$timeline-item-padding*2});
        width: $timeline-line-width;
        position: absolute;
        left: -$timeline-circle-width;
        top: $timeline-circle-width + $timeline-circle-space-top;
    }
}

.timeline-item__skills{
    margin-top: $xsmall-space;
}

.timeline-item__description{
    padding: $timeline-item-description-padding;
    margin-top: $xsmall-space;
}

.timeline-item__highlights{
    border: 1px solid;
    margin-top: $xsmall-space;
    background: rgba($text-color, 0.05);
    padding: $timeline-item-description-padding;
   
    ul{
        padding-left: $xsmall-space;
        list-style-type: disc;
        
        li{
            margin-top: 0.7rem;
        }

        ul{
           list-style-type: circle; 
           li{
            margin-top: 0;
            }
        }
    }
}

.timeline-item__highlights-heading{
    margin-top: -2.2rem;
}





//Fade style for last item
.timeline-item{
    &:last-of-type{
        .timeline-item__container{
             &:before{
                background: linear-gradient(to bottom, 
                $text-color 70%, transparent 70%,
                transparent 75%, rgba($text-color, 0.5) 75%, 
                rgba($text-color, 0.5) 80%, transparent 80%,
                transparent 85%, rgba($text-color, 0.2) 85%,
                rgba($text-color, 0.2) 90%, transparent 90%
                );
            }
        }
    } 
}

//Modifiers
@each $timeline-item-brand, $timeline-item-color in $timeline-item-colors {

    $className: ".timeline-item--#{$timeline-item-brand}";
    @if $timeline-item-brand == 'default' { 
        $className: ".timeline-item";
    }

    //Sass madness
    $i: index($timeline-item-colors, $timeline-item-brand $timeline-item-color);
    @if ($i+1) > length($timeline-item-colors){
        $i: 0;
    }
    //Get the next colorName/color pair, then get the color (index starts from 1)
    $next-timeline-item-color: nth( nth($timeline-item-colors, $i+1), 2); 

    #{$className}{
        .timeline-item__container{
            &:after{
                border-color: $timeline-item-color;
            }
            &:before{
                background: linear-gradient(to bottom, $timeline-item-color 0%, $next-timeline-item-color 100%);
            }
        }

        .timeline-item__description{
            border: 1px solid rgba( $timeline-item-color, 0.1 );
            background: rgba( $timeline-item-color, 0.05);
        }

        .timeline-item__highlights{
            border: 1px solid rgba($timeline-item-color, 0.1);
        }
    }
}
